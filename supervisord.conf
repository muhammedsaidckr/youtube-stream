[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid

[program:xvfb]
command=Xvfb :99 -screen 0 %(ENV_RESOLUTION)sx24
autorestart=true
stdout_logfile=/var/log/supervisor/xvfb.log
stderr_logfile=/var/log/supervisor/xvfb_err.log
priority=1

[program:pulseaudio]
command=pulseaudio --start --exit-idle-time=-1 --system
autorestart=true
stdout_logfile=/var/log/supervisor/pulseaudio.log
stderr_logfile=/var/log/supervisor/pulseaudio_err.log
priority=2

[program:browser]
command=/app/start_browser.sh
autorestart=true
stdout_logfile=/var/log/supervisor/browser.log
stderr_logfile=/var/log/supervisor/browser_err.log
priority=3
startretries=10
startsecs=5

[program:ffmpeg]
command=/app/stream.sh
autorestart=true
stdout_logfile=/var/log/supervisor/ffmpeg.log
stderr_logfile=/var/log/supervisor/ffmpeg_err.log
priority=4
startretries=10
startsecs=10

[program:api]
command=python3 /app/api.py
autorestart=true
stdout_logfile=/var/log/supervisor/api.log
stderr_logfile=/var/log/supervisor/api_err.log
priority=5
